name: autobuild

on:
    push:
        branches: ["main", "master"]
        # Ignore documentation and configuration changes
        paths-ignore:
            - ".gitignore"
            - "*.md"
            - "LICENSE"
    workflow_dispatch:

jobs:
    build:
        runs-on: windows-latest
        steps:
            - uses: actions/checkout@v4

            - name: Build
              shell: pwsh
              run: |
                mkdir ./build
                cd ./build
                cmake -DCMAKE_BUILD_TYPE=Release ..
                cd ..
                cmake --build ./build --config Release -j 8

            - name: tree
              shell: bash
              run: tree ./ --all

            - name: Upload
              uses: actions/upload-artifact@v4
              with:
                  name: Mouse Crosshairer
                  path: ./mouse_crosshair.exe
